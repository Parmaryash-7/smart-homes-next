"use strict";var toastino=angular.module("mexassi.toastino",[]);toastino.factory("Toastino",function(t){var s=function(t){this.message="",this.classValue=t,this.position="ts-top-right",this.className="ts-toastino",this.autoDismiss=!1,this.delay=3700,this.observer=null,this.array=void 0};return s.prototype.registerListener=function(t){this.observer=t},s.prototype.broadcastChanges=function(){this.observer.update instanceof Function&&this.observer.update(this)},s.prototype.manualDismiss=function(){this.autoDismiss=!1},s.prototype.setClass=function(){this.className+=void 0!==this.position&&null!==this.position?" "+this.classValue+" "+this.position:this.classValue},s.prototype.setMessage=function(t){this.setClass(),this.message=t,this.close()},s.prototype.close=function(){if(this.autoDismiss){var s=this;t(function(){s.dismiss()},this.delay)}},s.prototype.clearMessage=function(){this.message=""},s.prototype.dismiss=function(){this.className+=" "+s.DISMISS;var o=this;t(function(){o.broadcastChanges(this)},350)},s.DISMISS="ts-dismiss",s}),toastino.factory("toastinoService",function(t){var s=function(){this.toastinoMessages=[],this.observer=void 0,this.config={containerClass:"ts-container"}};return s.prototype.TOAST_CLASS_DANGER="alert alert-danger",s.prototype.TOAST_CLASS_WARNING="alert alert-warning",s.prototype.TOAST_CLASS_SUCCESS="alert alert-success",s.prototype.TOAST_CLASS_INFO="alert alert-info",s.prototype.registerListener=function(t){this.observer=t},s.prototype.broadcastChanges=function(){void 0!==this.observer&&this.observer.toastChanged instanceof Function||console.error("Cannot toast.")},s.prototype.update=function(s){s instanceof t&&this.remove(s,s.array)},s.prototype.remove=function(t,s){for(var o=void 0!==s?s:this.toastinoMessages,a=0;a<o.length;a++)if(t===o[a]){o.splice(a,1);break}},s.prototype.buildToastino=function(s){var o=new t(s.classValue);return void 0!==s.autoDismiss&&(o.autoDismiss=s.autoDismiss),void 0!==s.delay&&(o.delay=s.delay),void 0!==s.array&&(o.array=s.array),o.registerListener(this),o.setMessage(s.message),o},s.prototype.popToast=function(t){this.toastinoMessages.unshift(t)},s.prototype.makeDangerToast=function(t,s){this.makeToast({classValue:"alert alert-danger",message:t,autoDismiss:!0},s)},s.prototype.makeWarningToast=function(t,s){this.makeToast({classValue:"alert alert-warning",message:t,autoDismiss:!0},s)},s.prototype.makeSuccessToast=function(t,s){this.makeToast({classValue:"alert alert-success",message:t,autoDismiss:!0},s)},s.prototype.makeInfoToast=function(t,s){this.makeToast({classValue:"alert alert-info",message:t,autoDismiss:!0},s)},s.prototype.makeToast=function(t,s){if(void 0===t.classValue||void 0===t.message)throw new TypeError("The object must have properties: classValue, message");t.delay=s&&"long"===s?7400:3700;var o=this.buildToastino(t);this.popToast(o),this.broadcastChanges()},new s}),toastino.directive("toastino",function(){return{restrict:"E",scope:{containerclass:"@",toastinos:"="},template:'<div ng-class="(containerclass) ? \' ts-container-bottom-center \' : \'ts-container\'"><div class="row" ng-repeat="toast in toastinoController.toastinos"><div class="alert-dismissible {{toast.className}}"><button type="button" class="close" aria-label="Close" ng-click="toast.dismiss()"><span aria-hidden="true">&times;</span></button>{{toast.message}}</div></div></div>',controller:function(t,s){var o=this;o.init=function(){s.toastinos?o.toastinos=s.toastinos:o.toastinos=[],t.registerListener(o),o.toastChanged()},o.toastChanged=function(){s.toastinos||(o.toastinos=t.toastinoMessages)},o.init()},controllerAs:"toastinoController"}}),toastino.controller("toastinoCtrl",function(t){var s=["makeInfoToast","makeSuccessToast","makeWarningToast","makeDangerToast"],o=["Hello I am Angular-toastino","You can use me to display toast messages","Just inject toastinoService in your controller","You can install me via bower install angular-toastino"],a=this;a.containerClass="ts-container",a.test=[],a.SHOW=1,a.HIDE=0,a.documentation=a.HIDE,a.randomNumber=function(){var t=Math.floor(4*Math.random())+1;return t},a.toggleDocumentation=function(){a.documentation=a.documentation===a.SHOW?a.HIDE:a.SHOW,console.log("toggling to ",a.documentation)},a.createCustomToastino=function(){var s=t.buildToastino({classValue:"alert alert-danger",message:"This is an error message! It won't disappear until you dismiss it!",autoDismiss:!1,array:a.test});a.test.unshift(s)},a.createToastino=function(){var e=a.randomNumber()-1;"makeInfoToast"===s[e]?t.makeInfoToast(o[a.randomNumber()-1]):"makeSuccessToast"===s[e]?t.makeSuccessToast(o[a.randomNumber()-1],"long"):"makeWarningToast"===s[e]?t.makeWarningToast(o[a.randomNumber()-1]):"makeDangerToast"===s[e]&&t.makeDangerToast(o[a.randomNumber()-1],"long")}});